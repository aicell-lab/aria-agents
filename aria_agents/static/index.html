<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aria Agents</title>
    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/imjoy-rpc@latest/dist/imjoy-rpc.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hypha-rpc@0.20.40/dist/hypha-rpc-websocket.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.24.7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/marked@2.1.3/lib/marked.js"></script>
    <!-- Favicon and Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.3.0/github-markdown-light.css">
    <link rel="stylesheet" href="/css/App.css">
    <!-- Meta Tags -->
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>

<body class="bg-gray-100">
    <div id="app"></div>
    <!-- Script to open all links in a new tab -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('a');
            links.forEach(link => {
                // Add target="_blank" to all links to open in a new tab
                link.setAttribute('target', '_blank');
                // Security measure to prevent tabnabbing
                link.setAttribute('rel', 'noopener noreferrer');
            });
        });
    </script>

    <!-- App helper functions in plain JS -->
    <script src="/js/utils/helpers.js"></script>
    <script src="/js/utils/chatStatusHelpers.js"></script>  
    <script src="/js/models/AriaArtifacts.js"></script>
    <script src="/js/models/Chat.js"></script>
    <script src="/js/hooks/useChat.js"></script>
    <script src="/js/hooks/useAriaArtifacts.js"></script>
    <script src="/js/hooks/useUiState.js"></script>
    
    <!-- App components in JSX -->
    <script type="text/babel" data-presets="env,react" src="/js/components/Sidebar.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/ChatInput.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/SuggestedStudies.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/ChatHistory.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/ArtifactsPanel.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/AlertDialog.js"></script>
    <script type="text/babel" data-presets="env,react" src="/js/components/PauseButton.js"></script>

    <!-- React App in JSX (Babel standalone does not support ES6 module imports) -->
    <script type="text/babel" data-presets="env,react" src="/js/App.js"></script>

    <!-- Render the App component -->
    <script type="text/babel" data-presets="env,react">
        const { AppProvider, App } = window;
        ReactDOM.render(
            <AppProvider>
                <App />
            </AppProvider>,
            document.getElementById('app')
        );
    </script>
</body>
</html>
